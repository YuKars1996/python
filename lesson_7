_Autor_ = Karsakova Y.A.

import random
import copy

max_set = 90
all_set_cart = 15
str_cart = 5

def cart ():
    numbers = random.sample(range(1, max_set + 1),all_set_cart)
    card = [sorted(numbers[i:i + str_cart]) for i in range(0, len(numbers), str_cart)]
    return card

def cart_list():
    return random.sample(range(1, max_set + 1), 90)

def max_set_l(cart_list):
    return cart_list.pop()

def see_cart(cart):
    cart = copy.deepcopy(cart)
    booking = " ".join(['{:>2}' for i in range(9)])
    for l in cart:
        for s in " " * 4:
            l.insert(random.randint(0, len(l) - 1), s)
    return [booking.format(*l) for l in cart]

def update_cart(cart, count):
    for l in cart:
        yield ["-" if x == count else x for x in l]

def empty(cart):
    for l in cart:
        for k in l:
            if k != " ":
                return False
    return True

def count_in_cart(cart, count):
    return count in [count for l in cart for count in l]

def playing():
    print("Приветствуем вас в игре 'лото'! Вашим соперником будет компьютер. Если вы ошибетесь - проиграете. Начнем!")
    player_cart, comp_cart = cart(), cart()
    count = cart_list()
    while True:
        next_count = max_set_l(count)
        print("Новая бочка: {}. Осталось боченков: {}".format(next_count, len(count)))
        print("{0} Ваши карты: {0}\n{1}\n{2}\n{3}".format('-' * 6, *see_cart(player_cart)))
        print("{0} Карты компьютера: {0}\n{1}\n{2}\n{3}".format('-' * 5, *see_cart(comp_cart)))
        answer = "a"
        while answer not in "ynq":
            answer = input("Есть ли данная бочка у вас? Нажмите y(yes)/n(no), или q для выхода из игры: ")
            if answer == "q":
                break
            elif (answer == "y" and count_in_cart(player_cart, next_count) or (answer == "n" and not count_in_cart(player_cart, next_count))):
                print("Вы правы! Следующий ход.")
            else:
                print("Вы проиграли!")
                break
            player_cart = list(update_cart(player_cart, next_count))
            comp_cart = list(update_cart(comp_cart, next_count))
            if empty(player_cart):
                print("Вся ваша карточка заполнена.")
                break
            if empty(comp_cart):
                print("Вся карточка компьютера заполнена.")
                break

playing()

